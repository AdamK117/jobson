<!DOCTYPE html>
<html>

  <head>
    <title>Jobson Documentation</title>
    
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1,
                                   maximum-scale=1, user-scalable=no">

    <link rel="stylesheet" type="text/css" href="main.css">
    
  </head>

  <body>
    <header id="header-site">
  <div class="wrap">
    <h1>Jobson</h1>
    <nav>
      <a href="index.html">docs</a>
      <a href="https://github.com/adamkewley/jobson">source</a>
      <a href="https://github.com/adamkewley/jobson/releases">download</a>
    </nav>
  </div>
</header>


    <header id="section-title">
      <div class="wrap">
	<h1>Job Specs</h1>
      </div>
    </header>

    <section id="content">
      <div class="wrap">
	<main id="content-primary">
	  <ul>
  <li>Overview</li>
  <li>Creating a new job spec</li>
  <li>Expected Inputs</li>
  <li>Execution</li>
  <li>Expected Outputs</li>
</ul>

<h1 id="overview">Overview</h1>

<p>Job specs are saved in the job specs directory
(e.g. <code class="highlighter-rouge">specs/{spec-id}/spec.yml</code>). At runtime, Jobson uses the job
spec to figure out a job’s:</p>

<ul>
  <li><code class="highlighter-rouge">name:</code> and <code class="highlighter-rouge">description:</code></li>
  <li><code class="highlighter-rouge">expectedInputs:</code> from clients</li>
  <li><code class="highlighter-rouge">execution:</code> of the <code class="highlighter-rouge">application:</code>, once the inputs are provided</li>
  <li><code class="highlighter-rouge">execution:</code> <code class="highlighter-rouge">arguments:</code>, which may include some of the inputs</li>
  <li><code class="highlighter-rouge">execution:</code> <code class="highlighter-rouge">dependencies:</code>, such as scripts or data files that
should be copied into the runtime working directory</li>
  <li><code class="highlighter-rouge">expectedOutputs:</code> from the application, which Jobson should persist</li>
</ul>

<p>A basic example of a job spec would be:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">name</span><span class="pi">:</span> <span class="s">Demo Job Spec</span>

<span class="na">description</span><span class="pi">:</span> <span class="pi">&gt;</span>

  <span class="no">A demo job spec generated when creating a new Jobson deployment. Try it out!</span>
  
<span class="na">expectedInputs</span><span class="pi">:</span>

<span class="pi">-</span> <span class="na">id</span><span class="pi">:</span> <span class="s">firstName</span>
  <span class="na">type</span><span class="pi">:</span> <span class="s">string</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">First Name</span>
  <span class="na">description</span><span class="pi">:</span> <span class="s">Your first name</span>
  <span class="na">default</span><span class="pi">:</span> <span class="s">Jeff</span>

<span class="na">execution</span><span class="pi">:</span>

  <span class="na">dependencies</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">source</span><span class="pi">:</span> <span class="s">demo-script.sh</span>
    <span class="na">target</span><span class="pi">:</span> <span class="s">demo-script.sh</span>

  <span class="na">application</span><span class="pi">:</span> <span class="s">bash</span>
  <span class="na">arguments</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">demo-script.sh</span>
  <span class="pi">-</span> <span class="s">${inputs.firstName}</span>

<span class="na">expectedOutputs</span><span class="pi">:</span>

<span class="pi">-</span> <span class="na">id</span><span class="pi">:</span> <span class="s">output-from-script.jpg</span>
  <span class="na">path</span><span class="pi">:</span> <span class="s">output</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">Output from Script</span>
  <span class="na">description</span><span class="pi">:</span> <span class="s">An output generated by the runtime script</span>
  <span class="na">mimeType</span><span class="pi">:</span> <span class="s">image/jpeg</span>
  <span class="na">metadata</span><span class="pi">:</span>
    <span class="na">embed</span><span class="pi">:</span> <span class="no">true</span>
</code></pre></div></div>

<p>This example specifies:</p>

<ul>
  <li>
    <p>A job with a human-readable <code class="highlighter-rouge">name:</code> of <code class="highlighter-rouge">Demo
Job Spec</code> (and <code class="highlighter-rouge">description:</code>).</p>
  </li>
  <li>
    <p>That expects clients to provide a single string input called
<code class="highlighter-rouge">firstName</code>, which defaults to <code class="highlighter-rouge">Jeff</code> if clients don’t provide it</p>
  </li>
  <li>
    <p>That, once it receives the inputs:</p>

    <ul>
      <li>Copies <code class="highlighter-rouge">demo-script.sh</code> from the job spec’s directory to
 <code class="highlighter-rouge">demo-script.sh</code> in the job’s working directory</li>
      <li>Executes <code class="highlighter-rouge">bash</code> with <code class="highlighter-rouge">demo-script.sh</code> and <code class="highlighter-rouge">${inputs.firstName}</code> with two</li>
      <li>arguments: - <code class="highlighter-rouge">demo-script.sh</code>: The script <code class="highlighter-rouge">bash</code> should run -</li>
      <li><code class="highlighter-rouge">${inputs.firstName}</code>: The <code class="highlighter-rouge">firstName</code> provided as an input -</li>
      <li>Before executing, Jobson should copy <code class="highlighter-rouge">demo-script.sh</code> from the job</li>
      <li>spec folder to the job’s working directory -</li>
    </ul>
  </li>
</ul>

<p>This specifies a job that takes a single string input (<code class="highlighter-rouge">firstName</code>)
and runs a bash script (<code class="highlighter-rouge">demo-script.sh</code>). The bash script is copied
from the spec directory (<code class="highlighter-rouge">dependencies: source: demo-script.sh</code>) into
the job’s working directory (<code class="highlighter-rouge">dependencies: target:
demo-script.sh</code>). Once the script runs, it produces a file called
<code class="highlighter-rouge">output</code>, which has an <code class="highlighter-rouge">image/jpeg</code> MIME type and should be persisted
as <code class="highlighter-rouge">${request.id}.jpg</code> by Jobson.</p>

<h1 id="creating-a-job-spec">Creating a Job Spec</h1>

<p>The Jobson command-line interface comes with a basic spec generator
for creating a bareboes spec:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>jobson generate spec new-spec
</code></pre></div></div>

<p>This creates a job spec with an ID of <code class="highlighter-rouge">new-spec</code> at
<code class="highlighter-rouge">jobs/new-spec/spec.yml</code>.</p>

<h1 id="specyml-schema"><code class="highlighter-rouge">spec.yml</code> Schema</h1>

<p>Job specs are standard YAML files that should appear at the correct
path (e.g. <code class="highlighter-rouge">jobs/{job-id}/spec.yml</code>). This section describes what can
be put into the <code class="highlighter-rouge">spec.yml</code> files.</p>

<h2 id="name"><code class="highlighter-rouge">name</code></h2>

<p>Name of the Job Spec.</p>

<h2 id="description"><code class="highlighter-rouge">description</code></h2>

<p>Detailed Description of the Job Spec</p>

<h2 id="expectedinputs"><code class="highlighter-rouge">expectedInputs</code></h2>

<p>What Input Data Should be Provided to Execute a Job</p>

<h2 id="execution"><code class="highlighter-rouge">execution</code></h2>

<p>What Executes Once the Input Data is Received.</p>

<h2 id="expectedoutputs"><code class="highlighter-rouge">expectedOutputs</code></h2>

<p>What is Produced by Execution (and should be persisted by Jobson).</p>

<p>TODO: Work in progress. Need documentation about supported data types,
scripting functions, etc.</p>

	</main>
	
	<nav id="content-nav">
	  <ul>
  <li><a href="index.html">Overview</a></li>
  <li><a href="quickstart.html">Quickstart</a></li>
  <li><a href="https://github.com/adamkewley/jobson">Install</a></li>
  <li><a href="commandline.html">Command-Line Interface</a></li>
  <li><a href="workspaces.html">Workspaces</a></li>
  <li><a href="specs.html">Job Specs</a></li>
  <li><a href="template-expressions.html">Template Expressions</a></li>
  <li><a href="server-configuration.html">Server Configuration</a></li>
</ul>

	</nav>
      </div>
    </section>
  </body>
</html>
